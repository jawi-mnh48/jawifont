\documentclass[a4paper]{article}

\usepackage{url}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage[hang]{footmisc}
\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{titlesec}
\usepackage{xcolor}

\usepackage[
  bookmarks=true,
  colorlinks=true,
  linkcolor=linkcolor,
  urlcolor=linkcolor,
  citecolor=linkcolor,
  pdftitle={الخط الأميري},
  pdfsubject={توثيق خط المتون النسخي، الخط الأميري},
  pdfauthor={خالد حسني},
  pdfkeywords={خط, عربي, مطبعة, أميرية, أميري, يونيكود, أوبن تيب}
  ]{hyperref}

\definecolor{titlecolor} {rgb}{.67,.00,.05}
\definecolor{linkcolor}  {rgb}{.80,.00,.05}
\definecolor{codecolor}  {rgb}{.90,.90,.90}

\setmainlanguage {arabic}
\setotherlanguage{english}
\rightfootnoterule

\defaultfontfeatures{Scale=1.2}

\newfontfamily\englishfont
[    Ligatures = TeX,
        Script = Latin,
       Numbers = Proportional,
]{Amiri}
\newfontfamily\arabicfont
[       Script = Arabic,
       Numbers = Proportional,
]{Amiri}
\newfontfamily\englishfonttt[Script=Latin]{NoName Fixed}
\newfontfamily\arabicfonttt[Script=Arabic]{NoName Fixed}

\setlength{\parindent}{0pt}
\setlength{\parskip}{1em plus .2em minus .1em}
%setlength{\emergencystretch}{3em}  % prevent overfull lines
\setcounter{secnumdepth}{0}

\newfontfamily\titlefont[Script=Arabic,ItalicFont={*},Scale=1.4]{Reem Kufi}

\titleformat*{\section}{\Large\titlefont\color{titlecolor}}
\titleformat*{\subsection}{\large\titlefont\color{titlecolor}}
\titleformat*{\subsubsection}{\itshape\titlefont\color{titlecolor}}

\titlespacing{\section}{0pt}{*4}{*1}
\titlespacing{\subsection}{0pt}{*3}{0pt}
\titlespacing{\subsubsection}{0pt}{*2}{0pt}

\newcommand  \F[1]{\addfontfeature{RawFeature={#1}}}    % add feature
\renewcommand\L[1]{\F{language=#1}}                     % add language
\renewcommand\U[1]{\colorbox{codecolor}{\texttt{U+#1}}} % code points
\newcommand  \T[1]{\colorbox{codecolor}{\texttt{#1}}}   % typewritten text

\title{\titlefont {\F{+cv01}ا}لخط الأمير{\F{+cv01}ي}}
\author{خالد حسني}

\begin{document}

\maketitle
\tableofcontents

\setstretch{1.6}

\section{مقدمة}

الخط الأميري خط نسخي موجه لطباعة الكتب و النصوص الطويلة، و هو إحياء و محاكاة
للخط الطباعي الجميل الذي تميزت به مطبعة بولاق منذ أوائل القرن العشرين.

يتميز خط المطابع الأميرية بجماليته و مراعاته لفن الخط العربي، بأسلوب
نسخي جميل، و في ذات الوقت يراعى متطلبات الطباعة و القيود التي تفرضها، من
غير إفراط في جانب على حساب الآخر. و لهذا يتميز بمناسبته للصف الطباعي
عموما، و لصف الكتب خصوصا. و قد استُخدِم هذا الخط في طباعة المصحف
الأميري، و هو من المصاحف القليلة التي طبعت بالصف المعدني و لم يخطها خطاط
بيده، و هذا يجعله مادة خصبة لبناء خط حاسوبي مناسب لصف النصوص القرآنية.

يهدف مشروع الخط الأميري إلى إحياء تقاليد و جماليات الطباعة العربية
و موائمتها لتقنيات عصر الحواسيب، مع إتاحتها للعموم.

\section{الخصائص}
يدعم الخط الأميري كل الحروف و الرموز العربية في الإصدارة السادسة من
معيار يونيكود\footnote{\url{http://unicode.org/versions/Unicode6.0.0}}
مما يجعله مناسبا لكتابة أي لغة من اللغات التي تستخدم الخط العربي
و مدعومة في يونيكود، مثل الكردية و الفارسية و الأردية و الباشتو
و الملايوية و الهوسا و الولفية، على سبيل المثال لا الحصر. يشمل هذا أيضا
كل رموز و علامات الضبط القرآني في يونيكود، راجع
صفحة \pageref{ref:quranic-text} لمزيد من التفاصيل.

\subsection{أوبن تيب}
يستخدم الخط الأميري تقنية
أوبن تيب\footnote{\url{http://ar.wikipedia.org/wiki/أوبن_تايب}} للخطوط
الحاسوبية الذكية التي تتيح تحكما واسعا في أشكال الحروف حسب السياق المحيط
بها و في تموضع علامات التشكيل، و هي تقنية مدعومة في أغلب أنظمة التشغيل
الحديثة. يستخدم الخط الأميري تقنية أوبن تيب بشكل مكثف قلما تجاريه أي من
الخطوط الحاسوبية الأخرى و لذا قد تحدث مشاكل عند استخدامه مع البرمجيات
التي لا تطبّق معيار أوبن تيب بدرجة كافية.

\subsubsection{لفظ الجلالة}
يأخد لفظ الجلالة في خط النسخ شكلا خاصا به يختلف عن الشكل العادي للتتابع
لام لام هاء. يدعم الخط الأميري الشكل الخاص للفظ الجلالة سواء أتي منفردا:
”الله“، أو معطوفا بالفاء: ”فلله“، أو مجرورا باللام: ”لله“.

يضع الخط شدة و ألفا صغيرة على اللام الثانية إن لم تكن مُشَكَّلة، أما في
حال شُكلت فيُترك تشكيلها كما هو: ”اللَّه“.

يستخدم الخط مجموعة من القواعد تحدد متى يستخدم الشكل الخاص بلفظ الجلالة
لتفادي استخدامه مع الألفاظ التي تتركب من نفس تتابع الحروف:\footnote{راجع
هذا النقاش للاطلاع على تفاصيل أكثر حول أصل الفكرة و صاحبها:\\
\url{https://web.archive.org/web/20120724090018/graphics4arab.com/showthread.php?t=3975}}

\begin{itemize}
\item
  يأخذ التتابع \T{لله} شكل لفظ الجلالة في الحالات التالية:
  \begin{itemize}
  \item
    مسبوقا بألف غير مهموزة أو ألف ممدودة أو ألف وصل: \T{الله}،
    \T{آلله}، \T{ٱلله}.
    \begin{itemize}
    \item
      الألف غير مسبوقة بأي حرف، أو:
    \item
      مسبوقة بهمزة أو باء أو تاء أو فاء أو كاف أو هاء أو واو:
      \T{ءالله}، \T{بالله}، \T{تالله}، \T{فالله}،
      \T{كالله}، \T{هالله}، \T{والله}.
    \end{itemize}
  \item
    مسبوقا بفاء: \T{فلله}.
    \begin{itemize}
    \item
      الفاء غير مشكلة أو مشكلة بالفتح.
    \end{itemize}
  \item
    اللام الأولى غير مشكلة أو مشكلة بالكسر.
  \item
    اللام الثانية غير مشكلة أو مشكلة بالشدة أو بالشدة و الفتحة أو الشدة
    و الألف الصغيرة.
  \end{itemize}
\end{itemize}

فمثلا \T{عبدالله} تظهر ”عبدالله“ لأن الألف مسبوقة بدال، و الصواب
فصلها بمسافة \T{عبد الله} لتظهر ”عبد الله“. و لكتابة كلمة
\T{فلَّلَهُ} (من الجذر ”فلّ“) يكفي تشكيل اللام الأولى بالشدة
لتفادي استخدام شكل لفظ الجلالة: ”فلّله“. و كلمة \T{خالله} لن تأخذ
شكل لفظ الجلالة ”خالله“، حتى دون تشكيلها.

\subsubsection{الأرقام}
يدعم الخط الأميري أربع مجموعات من الأرقام العربية المشرقية:

\begin{description}[style=nextline,font=\mdseries\F{-pnum}]
\item[\L{ARA}٠١٢٣٤٥٦٧٨٩]
	و هي الأرقام المستخدمة في مصر و غيرها من بلاد المشرق العربي، و يمكن
	كتابتها باستخدام رموز يونيكود \U{0660}–\U{0669} أو
	مباشرة من لوحة المفاتيح التي تدعمها.

\item[\L{FAR}۰۱۲۳۴۵۶۷۸۹]
	و هي الأرقام المستخدمة في اللغة الفارسية، و يمكن كتابتها باستخدام
	رموز يونيكود \U{06F0}–\U{06F9}، أو مباشرة من لوحة
	المفاتيح التي تدعمها.

\item[\L{URD}۰۱۲۳۴۵۶۷۸۹]
	و هي المستخدمة في اللغة الأردية. للأسف لا تحتوي يونيكود رموزا مستقلة
	لهذه الأرقام، لذا لاستخدامها عليك استخدام الأرقام الفارسية و جعل لغة
	النص الأردية و إذا كان البرنامج يدعم خصائص أوبن تيب المتقدمة فستُفعّل
	التنويعة الأردية تلقائيًا.

\item[\L{SND}۰۱۲۳۴۵۶۷۸۹]
	و هي الأرقام المستخدمة في اللغة السندية و ينطبق عليها ما ينطبق على
	الأرقام الأردية مع استخدام اللغة السندية بالطبع.

\item[\L{KSH}۰۱۲۳۴۵۶۷۸۹]
	مثل سابقتيها، لكن للكشميرية.
\end{description}

\subsubsection{العلامات المحيطة للأرقام}
في يونيكود عدد من العلامات العربية الخاصة التي تضم الأرقام داخلها، أي
إذا تبعت أي من هذه العلامات برقم أو أكثر فإنها تحيط هذا الرقم. يدعم الخط
الأميري هذا العلامات، و الجدول التالي يسرد كل علامة و رقمها في يونيكود
و أقصي عدد من الأرقام يمكن أن تحيطه كل علامة (أي أرقام أكثر من هذا العدد
ستكون خارج العلامة). لاحظ أن الأرقام يجب أن تتبع العلامة مباشرة دون أي
فاصل بينها و لا حتى مسافة فارغة.

\begin{center}
  \begin{tabular}{r c c c}
    \hline
                  & يونيكود & عدد الأرقام & مثال     \\
    \hline
    علامة الرقم   & \U{0600} & ٤ & ^^^600١٢٣٤ \\
    علامة السنة   & \U{0601} & ٤ & ^^^601١٢٣٤ \\
    علامة الحاشية & \U{0602} & ٢ & ^^^602١٢   \\
    علامة الصفحة  & \U{0603} & ٣ & ^^^603١٢٣  \\
    علامة سموت    & \U{0604} & ٤ & ^^^604١٢٣٤ \\
    رقم الآية     & \U{06DD} & ٣ & ^^^6dd١٢٣  \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{الخصائص الاختيارية}
يحتوي الخط الأميري على بعض الخصائص غير المفعلة مبدئيا و التي يمكن
تفعيلها من البرمجيات التي تتيح التحكم في تفعيل و تعطيل خيارات أوبن تيب.

\begin{description}
\item[\T{pnum}]
	\textenglish{Proportional Numbers}\\
	الأرقام متغيرة العرض. لكل الأرقام في الخط الأميري نفس العرض بحيث
	تظهر بشكل مناسب في الجداول و غيرها من الاستخدامات التي لا يلائمها أن
	يختلف العرض من رقم لآخر. عند تفعيل هذه الخاصية سيُصبح عرض الأرقام
	متغيرا بما يناسب شكل كل رقم، لاستخدامها في الحالات التي لا يناسبها
	العرض الموحد.
	\begin{center}
	  \begin{tabular}{r r}
	    \hline
	     ثابتة                  & متغيرة     \\
	    \hline
	    {\F{-pnum}٠١٢٣٤٥٦٧٨٩}   & ٠١٢٣٤٥٦٧٨٩ \\
	    {\F{-pnum}١١١١١١١١١١}   & ١١١١١١١١١١ \\
	    {\F{-pnum}٨٨٨٨٨٨٨٨٨٨}   & ٨٨٨٨٨٨٨٨٨٨ \\
	    \hline
	  \end{tabular}
	\end{center}
	
\item[\T{ss01}]
	\textenglish{Stylistic Set 1}\\
	إذا أتت الباء (أو ما شابهها من الحروف المنقوطة من أسفل مثل پ) بعد
	راء أو واو أو ما شابههما من الحروف، تتحرك النقطة إلى ما أسفل الراء
	أو الواو لتفادي التلامس. فمثلا عند تفعيل هذه الخاصية:
	{\F{+ss01}”وبه“، ”ربها“، ”فربت“}، بينما المبدئي هو توسيع المسافة
	قليلا بين الراء و الباء: ”وبه“، ”ربها“، ”فربت“.

\item[\T{ss02}]
	\textenglish{Stylistic Set 2}\\
	عند تفعيل هذه الخاصية يأخذ تتابع الميم المتوسطة و الألف شكلا خاصا:
	{\F{+ss02}”فيما“، ”لضمان“، ”لقمان“، ”السماء“}، بينما المبدئي عدم
	استعمال أي شكل خاص: ”فيما“، ”لضمان“، ”لقمان“، ”السماء“.

\item[\T{ss03}]
	\textenglish{Stylistic Set 3}\\
	علامتي @ و \& معربتين: {\F{+ss03}@ \&}.

\item[\T{ss04}]
	\textenglish{Stylistic Set 4}\\
	عند تفعيل هذه الخاصية ستُسخدم تنويعة من حرف گاف أقرب لأسلوب خط النسخ
	من التنويعة المبدئية الشائعة في الخطوط الأخرى و المستوحاة من شكل
	الحرف في الخط الفارسي، فتحصل على {\F{+ss04}”گ“ و ”‍گ“} بدلا
	من ”گ“ و ”‍گ“.

\item[\T{ss05}]
	\textenglish{Stylistic Set 5}\\
	عند تفعيل هذه الخاصية توضع كسرة الحرف المشدد تحت الشدة و ليس الحرف، أي
	{\F{+ss05}”بِّ“} بدلا من ”بِّ“.

\item[\T{ss06}]
	\textenglish{Stylistic Set 6}\\
	تفعيل هذه الخاصية يمنع إضافة الشدة و الألف الخنجرية تلقائيًا فوق لفظ
	الجلالة، فمثلا عند كتابة \T{الله} و \T{فلله} تصبح
	{\F{+ss06}”الله“} و {\F{+ss06}”فلله“} بدلا من ”الله“ و ”فلله“.

\item[\T{ss07}]
	\textenglish{Stylistic Set 7}\\
	تفعيل هذه الخاصية يلغي ميزة الكشيدة المقوسة، فمثلا \T{محمـــــــد}
	تصبح {\F{+ss07}”محمـــــــد“} بدلا من ”محمـــــــد“.

\item[\T{ss08}]
	\textenglish{Stylistic Set 8}\\
	تفعيل هذه الخاصية يفعل التنويعة المقلوبة من الفاصلة و الفاصلة المنقوطة
	كالتي تستخدم في السندية و الجاوية، فتصبح {\F{+ss08}”،؛“} بدلا من ”،؛“.
\end{description}

\subsection{النصوص القرآنية}
\label{ref:quranic-text}
تدعم يونيكود أغلب الرموز و العلامات المطلوبة في رسم المصاحف، لكن توجد
بعض المشاكل و العلامات المتشابهة و التي نوضح هنا ما نراه أفضل الطرق
لترميز النص القرآني في يونيكود، و التي يدعمها الخط الأميري.

\subsubsection{الهمزة المفردة (\textup{\arabicfont ء})}
على خلاف قواعد الإملاء الحديثة، إذا أتت الهمزة المفردة في وسط الكلمة بين
حرفين يتصل أحدهما بالآخر، فإنها لا ترسم على نبرة كما في ”شيءا“، أو تقلب
ألف مد مثل ”لءادم“، بل ترسم في الفراغ بين الحرفين دون التأثير على
اتصالهما. للأسف، الهمزة المفردة في يونيكود حرف فاصل، أي إنها إن أتت بين
حرفين متصلين تفصلهما، لذا إذا استعملت الهمزة المفردة في الكلمتين
السابقتين مع الخطوط العادية فستظهران ”شي‌ء‌ا“
و ”ل‌ء‌ادم“. يدعم الخط الأميري الهمزة في وسط الكلمة بالمخالفة
لقواعد يونيكود الحالية لخطئها، لذا في تلك الحالات يكفي استخدام الهمزة
المفردة (ء) و رمزها \U{0621} و ستظهر الكلمة بشكلها الصحيح، و نأمل
في المستقبل أن تُصوّب قواعد يونيكود.

\subsubsection{الحروف الصغيرة}
\begin{description}[style=nextline]
\item[الألف الصغيرة (◌ٰ)]
	رسم المصاحف المستخدمة في بلاد المشرق العربي يحتوي نوعين مختلفين من
	الألف الصغيرة، الأولى توضع فوق الحرف لتدل على أنه يقلب ألفا، كما في
	”الصلوٰة“ و ”موسىٰ“ و هذا الحرف موجود في يونيكود، و رمزه \U{0670}. الألف
	الصغيرة الأخرى تدل على الألف المتروكة في الرسم العثماني و لذا تأتي بعد
	الحرف و ليست فوقه، مثل ”هـٰذا“ و ”ذ ٰلك“، لكن لا تحتوي يونيكود على رمز
	مستقل لهذه الألف، بل تكتب على كشيدة إذا أتت بين حرفين متصلين، و على
	مسافة غير فاصلة \U{00A0} في ما عدا ذلك.

\item[الواو (ۥ) و الياء (ۦ) الصغيرتين]
	تحتوي يونيكود على واوين و يائين، واحدة مفردة لتستخدم في آخر الكلمة كما
	في ”رسولهۥ“ و ”رسولهۦ“ أو بعد حرف لا يتصل بما بعده مثل ”داوۥد“،
	و رمزيهما \U{06E5} و \U{06E6} على التوالي، و الأخرى للاستخدام في وسط
	الكلمة و توضع فوق تطويل كما في ”إبراهـۧم“ و ”لیسـࣳءوا“، و رمزيهما
	\U{06E7} و \U{08F3} على التوالي.
\end{description}

\subsubsection{علامة المد اللازم (\textup{\arabicfont ◌ۤ})}
تحتوي يونيكود علامتي مدة، الأولى تستخدم مع الألف غير المهموزة لتكوين ألف
المد (آ)، و رمزها \U{0653}، و هذه لا تأتي في رسم المصحف، و الأخرى
للدلالة على المد اللازم كما في ”الۤمۤ“، و رمزها \U{06E4}، و هي
المستخدمة في رسم المصحف، لذا ينبغي عدم الخلط بينهما لأن لكل واحدة خصائص
في الخط تناسب الاستخدام الذي وضعت له.

\subsubsection{التنوين}
يفرق رسم المصاحف بين نوعين من التنوين، التنوين المتراكب ”◌ً ◌ٌ ◌ٍ“،
و التنوين المتتابع ”◌ࣰ ◌ࣱ ◌ࣲ“. التنوين المتراكب هو التنوين المعتاد المتاح
في لوحة المفاتيح و رموزه \U{064B} و \U{064C}
و \U{064D} على التوالي. التنوين المتتابع لم يُضف إلا في الإصدارة
٦٫١ من معيار يونيكود\footnote{صدرت في يناير ٢٠١٢.}، و رموزه
\U{08F0} و \U{08F1} و \U{08F2} على التوالي. لدعم
البرامج التي لا تدعم هذه الإصدارة من يونيكود يمكن تكرار الفتحة أو الضمة
أو الكسرة و سيضبط الخط مواضعها لتبدو كالتنوين المتراكب، لكن لا يعمل هذا
مع البرمجيات التي تستخدم محرك ميكروسوفت لعرض النصوص (أغلب البرمجيات التي
تعمل على وندوز باستثناء برمجيات موزيلا و أدوبي).

\subsubsection{الياء}
في أغلب المصاحف لا تنقط الياء إذا أتت مفردة أو في آخر الكلمة، أي تكتب
”ی“ و ”‍ی“\footnote{و هو الإملاء الشائع في مصر أيضا.}. تحتوي يونيكود
على ياء خاصة رمزها \U{06CC} لا تختلف عن الياء العادية إلا في عدم
نقطها في هاتين الحالتين، و لذا تناسب هذا الاستخدام. ينبغي عدم الخلط بين
هذه الياء و الألف المقصورة التي لا تنقط بغض النظر عن موقعها في الكلمة،
مثل ”هدىٰهم“ و ”ءاتىٰه“ و ”موسىٰ“.


\section{المشاكل المعروفة}

لن يعمل الخط الأميري بكامل مزاياه مع البرمجيات التي لا تدعم خصائص أوبن تيب بشكل
سليم، أو لا تدعمها على الإطلاق.

المساواة بالكشيدة في ميكروسوفت أوفيس غير متوافقة مع الخط الأميري، و يجب استخدام
نوع مساواة آخر للحصول على نتائج مقبولة.

%\section{الترخيص}


\end{document}
